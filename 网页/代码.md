# 代码

<div id = "首"></div>
<script src = "../js/首.js"></script>

总共 261 个片断。

610
```
def 日期时间差值(天时1, 天时2):
    差值 = 天时2 - 天时1
    if 差值.days > 0:
        return True
    elif 差值.seconds / 3600 > 3:
        return True
    else:
        rerurn False

def 日期时间差值(天时1, 天时2):
    if 天时1 > 天时2:
        return
    差值 = 天时2 - 天时1
    if 差值.days == 0 and 差值.seconds / 3600 <= 3:
        return False
    else:
        rerurn True

def 日期时间差值(天时1, 天时2):
    if 天时1 > 天时2:
        return
    差值 = 天时2 - 天时1
    return (差值.days * 24 + 差值.seconds / 3600) > 3
```

609
```
from datetime import datetime

datetime(2024, 5, 1) - datetime(2024, 4, 30)

(datetime(2024, 5, 1) - datetime(2024, 4, 30)).days

datetime(2024, 5, 1, 9) - datetime(2024, 4, 30, 22)

datetime(2024, 5, 2, 9) - datetime(2024, 4, 30, 22)

datetime(2024, 5, 1) > datetime(2024, 4, 30)
```

606
```
# Windows 运行

shell:startup
```

605
```
# 天翼云备案才能使用的端口

80/8080/443
```

603
```
# 修改完 workspace.yaml 后,你需要点击保存修改并重新启动工作空间以使其生效。
---
version: "v1"
image: "cloudstudio-devops-docker.pkg.coding.net/artifacts/workspace/full-1.0.0:2023-09-05.0654"
```

602
```
docker run -it --name mydotnet mcr.microsoft.com/dotnet/sdk:8.0-nanoserver-ltsc2022
```

601
```
services:
  db:
    image: mariadb:10.11
    container_name: seatable-mysql
    environment:
      - MYSQL_ROOT_PASSWORD=PASSWORD  # Requested, set the root's password of MySQL service.
      - MYSQL_LOG_CONSOLE=true
    volumes:
      - /opt/seatable/mysql-data:/var/lib/mysql  # Requested, specifies the path to MySQL data persistent store.
    networks:
      - seatable-net

  memcached:
    image: memcached:1.5.6
    container_name: seatable-memcached
    entrypoint: memcached -m 256
    networks:
      - seatable-net

  redis:
    image: redis:5.0.7
    container_name: seatable-redis
    networks:
      - seatable-net
          
  seatable:
    image: seatable/seatable-developer:latest
    container_name: seatable
    ports:
      - "80:80"
      - "443:443"  # If https is enabled, cancel the comment.
    volumes:
      - /opt/seatable/seatable-data:/shared  # Requested, specifies the path to Seafile data persistent store.
    environment:
      - DB_HOST=db
      - DB_ROOT_PASSWD=PASSWORD  # Requested, the value shuold be root's password of MySQL service.
      - SEATABLE_SERVER_LETSENCRYPT=False # Default is False. Whether to use let's encrypt certificate.
      - SEATABLE_SERVER_HOSTNAME=example.seatable.com # Specifies your host name.
      - TIME_ZONE=Asia/Shanghai # Optional, default is UTC. Should be uncomment and set to your local time zone.
    depends_on:
      - db
      - memcached
      - redis
    networks:
      - seatable-net

networks:
  seatable-net:
```

600
```
services:
  seatable-server:
    image: ${SEATABLE_IMAGE:-seatable/seatable-developer:latest}
    restart: unless-stopped
    container_name: seatable
    ports:
      - 80:80
      - ${SEATABLE_SSL_PORT:-}:443
    volumes:
      - "${SEATABLE_VOLUMES:-/opt/seatable/seatable-data}:/shared"
    environment:
      - DB_HOST=${SEATABLE_MYSQL_DB_HOST:-mariadb}
      - DB_ROOT_PASSWD=${SEATABLE_MYSQL_ROOT_PASSWORD:?Variable is not set or empty}
      - SEATABLE_SERVER_HOSTNAME=${SEATABLE_SERVER_HOSTNAME:?Variable is not set or empty}
      - SEATABLE_SERVER_PROTOCOL=${SEATABLE_SERVER_PROTOCOL:-http}
      - SEATABLE_SERVER_LETSENCRYPT=${SEATABLE_SERVER_LETSENCRYPT:-False}
      - SEATABLE_ADMIN_EMAIL=${SEATABLE_ADMIN_EMAIL:-}
      - SEATABLE_ADMIN_PASSWORD=${SEATABLE_ADMIN_PASSWORD:-}
      - TIME_ZONE=${TIME_ZONE}
    depends_on:
      mariadb:
        condition: service_healthy
      memcached:
        condition: service_started
      redis:
        condition: service_started
    networks:
      - frontend-net
      - backend-seatable-net

  mariadb:
    image: ${SEATABLE_DB_IMAGE:-mariadb:10.11}
    restart: unless-stopped
    container_name: seatable-mariadb
    environment:
      - MYSQL_ROOT_PASSWORD=${SEATABLE_MYSQL_ROOT_PASSWORD:?Variable is not set or empty}
      - MYSQL_LOG_CONSOLE=true
      - MARIADB_MYSQL_LOCALHOST_USER=1
      - MARIADB_MYSQL_LOCALHOST_GRANTS=USAGE
      - MARIADB_AUTO_UPGRADE=1
    volumes:
      - "${SEATABLE_MYSQL_VOLUMES:-/opt/seatable/mysql-data}:/var/lib/mysql"
    networks:
      - backend-seatable-net
    healthcheck:
      test: ["CMD", "mysqladmin" ,"ping", "-p${SEATABLE_MYSQL_ROOT_PASSWORD}", "-h", "localhost"]
      interval: 5s
      timeout: 30s
      retries: 60

  memcached:
    image: ${SEATABLE_MEMCACHED_IMAGE:-memcached:1.5.6}
    restart: unless-stopped
    container_name: seatable-memcached
    entrypoint: memcached -m 256
    networks:
      - backend-seatable-net

  redis:
    image: ${SEATABLE_REDIS_IMAGE:-redis:5.0.7}
    restart: unless-stopped
    container_name: seatable-redis
    networks:
      - backend-seatable-net

networks:
  frontend-net:
    name: frontend-net
  backend-seatable-net:
    name: backend-seatable-net
```

599
```
docker pull nginx

docker run --name nginx-test -p 8080:80 -d nginx

curl localhost:8080
```

598
```
docker run ubuntu /bin/echo "Hello world"

docker run -it ubuntu /bin/bash
```

597
```
dnf install docker

docker --version

docker run hello-world

docker run -it ubuntu bash

whoami

pwd
```

596
```
无法安装 Hyper-V: 处理器没有所需要的虚拟化功能。
```

595
```
no matching mainfest for windows/am64 10.0 in the mainfest list entries.
```

594
```
Docker Image Format v1 and Docker Image mainfest version 2, schema 1 support is disabled by default and will be removed in an upcoming release.
```

593
```
# 删除所有容器

docker rm $(docker ps -aq)

# 停止所有容器

docker stop $(docker ps -aq)
```

592
```
docker pull mcr.microsoft.com/windows/nanoserver:ltsc2022

docker run -it mcr.microsoft.com/windows/nanoserver:ltsc2022 cmd.exe
```

591
```
docker run -it mcr.microsoft.com/windows/servercore:ltsc2022 powershell
```

590
```
# Windows Server 安装 Docker CE

Invoke-WebRequest -UseBasicParsing "https://raw.githubusercontent.com/microsoft/Windows-Containers/Main/helpful_tools/Install-DockerCE/install-docker-ce.ps1" -o install-docker-ce.ps1

.\install-docker-ce.ps1

# Hello World

docker run hello-world
```

589
```
# python

列表 = ['知', '浏']
[x.encode('gbk') for x in 列表]
```

588
```
sqlcmd -?

sqlcmd -S .\SQLEXPRESS

SELECT 0.1 + 0.2
GO
EXIT
```

587
```
# bash

txt=( *.txt )
echo ${txt[@]}

files=( * )
echo ${files[@]}
```

586
```
# bash
files=($(ls))
files=( * )

echo $files
echo ${files[0]}
echo ${files[@]}

rm ${files[0]} ${files[1]}
rm -r ${files[1]} ${files[4]}
```

585
```
nginx

nginx -s reload
nginx -s stop
nginx -s quit
```

584
```
# dotnet

dotnet new blazor -o BlazorApp
cd BlazorApp
dotnet watch
```

583
```
# Coding Cloud Studio
# Ubuntu 20，dotnet 6.0

# 查看 Ubuntu 版本
lsb_release -a

# 添加存储库
wget https://packages.microsoft.com/config/ubuntu/20.04/packages-microsoft-prod.deb -O packages-microsoft-prod.deb

sudo dpkg -i packages-microsoft-prod.deb

rm packages-microsoft-prod.deb

# 安装 SDK
sudo apt-get update && \
  sudo apt-get install -y dotnet-sdk-8.0

# 查看 dotnet 版本
dotnet --version
```

582
```
UVP VMTools For Windows 2.5
```

581
```
# 查看 sshd 服务的状态

sc query sshd
```

579
```
# 命令行执行代码

python -c "print('abc123')"

python -c "print('abc123')
print('123abc')"
```

578
```
docker run hello-world
```

577
```
error during connect: in the default daemon configuration on Windows, the docker client must be run with elevated privilges to connect: The system cannot find the file specified.
```

575
```
SELECT VERSION(), CURRENT_DATE, NOW();

\c
```

574
```
# Ubuntu MySQL

Variable_name	Value
character_set_client	utf8mb4
character_set_connection	utf8mb4
character_set_database	utf8mb4
character_set_filesystem	binary
character_set_results	utf8mb4
character_set_server	utf8mb4
character_set_system	utf8mb3
character_sets_dir	/usr/share/mysql/charsets/
```

573
```
# Coding Cloud Studio

apt update
apt install mysql-server
mysqld
which mysqld
mysqladmin --version
```

572
```
# Coding Cloud Studio

System has not been booted with systemd as init system (PID 1).
```

568
```
# powershell 查看文件的 MD5

certutil -hashfile mysql.zip MD5
```

567
```
divmod(7, 3)
divmod(11, 4)
```

566
```
sorted('张三,李四,王五'.split(','))

sorted('王五,李四,张三'.split(','))

sorted('王五,李四,张三'.split(','), key = lambda x: x.encode('gbk'))
```

563
```
data = ['张三', '李四', '王五']
sorted_data = sorted(data, key = lambda x: x.encode('gb2312'))
print(sorted_data)
```

561
```
Dandified Yum
```

556
```
# 腾讯云 Cloud Studio

mkdir /workspace/vim

echo 'set dir=/workspace/vim
set undodir=/workspace/vim
set backupdir=/workspace/vim

set number
set fileformat=unix' >> /etc/vim/vimrc

# cs /etc/vim/vimrc
```

549
```
openresty/1.17.8.2
```

545
```
# requirements.txt

Flask==2.3.3
```

544
```
# app.py

# -*- coding: utf-8 -*-
from flask import Flask
from flask import render_template
app = Flask(__name__)


@app.route('/')
@app.route('/<name>')
def hello(name=None):
    return render_template('index.html', name=name)


if __name__ == '__main__':
    app.run(host='0.0.0.0')
```

542
```
systemctl restart sshd
```

540
```
# SSH 禁用密码登录

# PasswordAuthentication yes
PasswordAuthentication no
```

535
```
# 华为云

Authorized users only. All activities will be monitored and reported.
```

529
```
# 腾讯云官方

81.69.102.0/24
106.55.203.0/24
101.33.121.0/24
101.32.250.0/24
175.27.43.0/24
```

526
```
# 阿里云官方

47.96.60.0/24
118.31.243.0/24
```

525
```
TypeError: 'NoneType' object is not subscriptable
```

517
```
# Django 自关联

models.ForeignKey('self', on_delete = models.CASCADE)
```

516
```
# 阿里云官方

47.96.60.0/24
118.31.243.0/24
8.139.112.0/24
8.139.99.192/26
```

515
```
# 封 123.0.0.1 ~ 123.255.255.254 这个段的ip
deny 123.0.0.0/8;

# 封 123.123.0.1 ~ 123.123.255.254 这个段的ip
deny 123.123.0.0/16;

# 封 123.123.123.1 ~ 123.123.123.254 这个段的ip
deny 123.123.123.0/24;

# 封所有ip
deny all;
```

513
```
# pwsh 7.4 可用，powershell 5.1 不可用。

net stop termservice && net start termservice
```

512
```
# RDP

net stop termservice
net start termservice
```

505
```
An error occurred.
Sorry, the page you are looking for is currently unavailable.
Please try again later.

If you are the system administrator of this resource then you should check the error log for details.

Faithfully yours, nginx.
```

504
```
$certname = "{ali}"

$cert = New-SelfSignedCertificate -Subject "CN=$certname" -CertStoreLocation "Cert:\CurrentUser\My" -KeyExportPolicy Exportable -KeySpec Signature -KeyLength 2048 -KeyAlgorithm RSA -HashAlgorithm SHA256
```

503
```
# 从网络复制粘贴过来

server {
    listen      80;
    listen [::]:80;
    server_name example.com;
    return 301 https://$host$request_uri;
}
server {
    listen 443 ssl;
    server_name example.com;
    ssl_certificate /etc/letsencrypt/live/example.com/fullchain.pem; # managed by Certbot
    ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem; # managed by Certbot
    include /etc/letsencrypt/options-ssl-nginx.conf; # managed by Certbot
    ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem; # managed by Certbot
    location / {
        proxy_pass http://127.0.0.1:8080;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
```

502
```
a = [1, 2, 3, 4]
[变量 + 1 for 变量 in a]
```

499
```
# nginx 拦截与 server_name 不匹配的

server {
    listen 80 default_server;
    return 444;
}
```

497
```
编码|功能
--|--
10010|联通主菜单
00|手机上网流量查询
01|账户余额
02|实时话费
03|常用办理业务
04|常用查询业务
05|充值卡充值
1|话费及积分
101|实时话费
102|账户余额
103|上月账单
104|历史账单
1041|
1042|
1043|
1044|
1045|
1046|
1047|
1048|
1049|
105|积分查询﻿
106|积分消费记录﻿
107|手机上网流量﻿
108|积分产生记录﻿
150|常用查询业务
1502|套餐余量明细查询
2|账户查询
201|信用额度﻿
202|缴费记录查询﻿
203|业务受理记录查询﻿
204|用户信息﻿
205|帐户信息﻿
206|SP代收费﻿
207|查询PUK码﻿
208|套餐查询﻿
3|充值卡充值
4|客户服务
401|密码修改﻿
404|垃圾短信举报﻿
405|密码重置﻿
406|中国联通APP下载﻿
597|5G升级包开通
6|增值业务
7|省份专区
```

493
```
ApplicationPoolIdentity
LocalSystem
```

492
```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <system.webServer>
    <handlers>
      <add name="PythonHandler" path="*" verb="*" modules="httpPlatformHandler" resourceType="Unspecified"/>
    </handlers>
    <httpPlatform processPath="c:\python36-32\python.exe"
                  arguments="c:\home\site\wwwroot\runserver.py --port %HTTP_PLATFORM_PORT%"
                  stdoutLogEnabled="true"
                  stdoutLogFile="c:\home\LogFiles\python.log"
                  startupTimeLimit="60"
                  processesPerApplication="16">
      <environmentVariables>
        <environmentVariable name="SERVER_PORT" value="%HTTP_PLATFORM_PORT%" />
      </environmentVariables>
    </httpPlatform>
  </system.webServer>
</configuration>
```

491
```
pkill -f uwsgi -9
```

488
```
probably another instance of uWSGI is running on the same address
```

482
```
systemctl restart nginx
systemctl status nginx

systemctl start nginx
systemctl stop nginx
```

481
```
killall nginx
killall uwsgi

killall -9 nginx
killall -9 uwsgi
```

479
```
lsof -i :8000
```

478
```
[uwsgi]
socket = 127.0.0.1:8001
chdir = /root/django_project/
wsgi-file = django_project/wsgi.py
processes = 4
threads = 2
vacuum = true
buffer-size = 65536
```

477
```
user www-data;
worker_processes auto;
pid /run/nginx.pid;
include /etc/nginx/modules-enabled/*.conf;

events {
	worker_connections 768;
	# multi_accept on;
}

http {

	##
	# Basic Settings
	##

	sendfile on;
	tcp_nopush on;
	types_hash_max_size 2048;
	# server_tokens off;

	# server_names_hash_bucket_size 64;
	# server_name_in_redirect off;

	include /etc/nginx/mime.types;
	default_type application/octet-stream;

	##
	# SSL Settings
	##

	ssl_protocols TLSv1 TLSv1.1 TLSv1.2 TLSv1.3; # Dropping SSLv3, ref: POODLE
	ssl_prefer_server_ciphers on;

	##
	# Logging Settings
	##

	access_log /var/log/nginx/access.log;
	error_log /var/log/nginx/error.log;

	##
	# Gzip Settings
	##

	gzip on;

	# gzip_vary on;
	# gzip_proxied any;
	# gzip_comp_level 6;
	# gzip_buffers 16 8k;
	# gzip_http_version 1.1;
	# gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;

	##
	# Virtual Host Configs
	##

	include /etc/nginx/conf.d/*.conf;
	include /etc/nginx/sites-enabled/*;
}


#mail {
#	# See sample authentication script at:
#	# http://wiki.nginx.org/ImapAuthenticateWithApachePhpScript
#
#	# auth_http localhost/auth.php;
#	# pop3_capabilities "TOP" "USER";
#	# imap_capabilities "IMAP4rev1" "UIDPLUS";
#
#	server {
#		listen     localhost:110;
#		protocol   pop3;
#		proxy      on;
#	}
#
#	server {
#		listen     localhost:143;
#		protocol   imap;
#		proxy      on;
#	}
#}
```

469
```
# openEuler
/usr/share/nginx/html
/etc/nginx/nginx.conf
```

468
```
Error 503 Backend unavailable, connection timeout
Backend unavailable, connection timeout

Error
Details:

Varnish cache server
```

467
```
curl -Lk 'https://code.visualstudio.com/sha/download?build=stable&os=cli-alpine-x64' --output vscode_cli.tar.gz

tar -xf vscode_cli.tar.gz

./code tunnel
```

465
```
Huawei Cloud EulerOS

dnf install git
```

463
```
echo echo abc 123 > temp.ps1
powershell -file temp.ps1
powershell .\temp.ps1

echo echo "abc 123" > temp.ps1
powershell -file temp.ps1
powershell .\temp.ps1

powershell echo abc 123
```

461
```
10.0.0.0/8
172.16.0.0/12
192.168.0.0/16
::/0
```

457
```
warning: in the working copy of …
LF will be replaced by CRLF the next time git touches it .
```

456
```
gem install jekyll bundler
jekyll new myblog
cd myblog
bundle exec jekyll serve
```

455
```
ruby -v
gem -v
gcc -v
g++ -v
make -v
```

452
```
ord('`')
```

451
```
let a=1+2
echo $a
```

447
```
<a rel = "noreferrer" ...>
```

445
```
from flask import Flask

app = Flask(__name__)

@app.route('/')
def hello_world():
    return '<p>Hello, World!</p>'
```

444
```
pip install --upgrade pip
pip install Flask

# shell.aliyun.com 只开放 60000、61000、65000 等端口。
flask run --host 0.0.0.0 --port 60000
```

443
```
a=1
b=z
echo "${a}${b}c"
# echo "${ a }${ b }c"
# echo $a || $b || 'c'
```

442
```
bash: compdef: command not found
```

441
```
a=123
echo '$a bc\n123'
echo '$abc\n123'
echo "$a bc\n123"
echo "${a}bc\n123"
```

440
```
echo 'abc\n123'
echo "abc\n123"
```

439
```
# .vscode/preview.yml
autoOpen: false # 打开工作空间时是否自动开启所有应用的预览
apps:
  - port: 8000 # 应用的端口
    run: python manage.py runserver # 应用的启动命令
    root: ./site # 应用的启动目录
    name: my-first-app # 应用名称
    description: 我的第一个 App。 # 应用描述
    autoOpen: true # 打开工作空间时是否自动开启预览（优先级高于根级 autoOpen）
```

438
```
tar -cf archive.tar file1 file2 dir1

tar -xf archive.tar
```

434
```
New-SmbGlobalMapping -LocalPath z: -RemotePath \\阿里云NAS\myshare -Persistent $true
```

432
```
#!/bin/bash
set -e
# start Xvfb xserver
Xvfb :0 -screen 0 960x540x24 -listen tcp -ac +extension GLX +extension RENDER > /dev/null 2>&1 &
# start x11vnc server
x11vnc -forever -shared -noipv6 > /dev/null 2>&1 &
# start noven server
websockify --web /usr/share/novnc 6080 localhost:5900 > /dev/null 2>&1 &
# install pygame
pip3 install pygame
```

431
```
# .vscode/preview.yml
autoOpen: true # 打开工作空间时是否自动开启所有应用的预览
apps:
  - port: 5000 # 应用的端口
    run: pip install -i https://mirrors.tencent.com/pypi/simple/ -r ./requirements.txt && bash /usr/bin/start-vnc-session.sh && python ./app.py # 应用启动命令
    root: ./web # 应用的启动目录
    name: Python Cloud Studio Demo # 应用名称
    description: Python Cloud Studio Demo Project # 应用描述
    autoOpen: true # 打开工作空间时是否自动运行命令（优先级高于根级 autoOpen）
    autoPreview: true # 是否自动打开预览, 若无则默认为true
```

430
```
# 阿里云 NAS

控制面板
网络和共享中心
更改适配器设置
右键 - 属性
Internet 协议版本 4(TCP/IPv4) - 属性
高级 - WINS
NetBIOS 设置 - 启用
```

428
```
CSRF_TRUSTED_ORIGINS = [
    'http://localhost:8000'
],
ALLOWED_HOSTS = [
    'localhost',
],
CORS_ORIGIN_WHITELIST = [
    'http://localhost:8000',
]
```

425
```
# 腾讯云 Cloud Studio

cs /etc/vim/vimrc

set dir=/workspace/vim
set undodir=/workspace/vim
set backupdir=/workspace/vim

set number
set fileformat=unix
```

423
```
screen --version
```

418
```
# Django 日志级别、日期时间、模块、进程、线程、信息。

    'formatters': {
        'verbose': {
            'format': '{levelname} {asctime} {module} {process:d} {thread:d} {message}',
            'style': '{',
        },
    },
```

417
```
curl -Lk 'https://code.visualstudio.com/sha/download?build=stable&os=cli-alpine-x64' --output vscode_cli.tar.gz

tar -xf vscode_cli.tar.gz

code tunnel
```

416
```
curl -Lk 'https://code.visualstudio.com/sha/download?build=stable&os=cli-alpine-x64' --output vscode_cli.tar.gz

tar -xf vscode_cli.tar.gz

code tunnel
```

415
```
snap install code --classic

code tunnel

github.com/login/device
```

414
```
LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'handlers': {
        'file': {
            'level': 'INFO',
            'class': 'logging.FileHandler',
            'filename': '/path/to/django.log',
        },
    },
    'loggers': {
        'django': {
            'handlers': ['file'],
            'level': 'INFO',
            'propagate': True,
        },
    },
}
```

413
```
LOGGING = {
    "version": 1,
    "disable_existing_loggers": False,
    "handlers": {
        "file": {
            "level": "DEBUG",
            "class": "logging.FileHandler",
            "filename": "/path/to/django/debug.log",
        },
    },
    "loggers": {
        "django": {
            "handlers": ["file"],
            "level": "DEBUG",
            "propagate": True,
        },
    },
}
```

411
```
reboot
```

410
```
chsh -s /bin/bash
```

407
```
Unit code-server.service
```

405
```
curl Error in the HTTP2 framing layer
```

403
```
ssh root@公网IP

code-server --bind-addr 0.0.0.0:8080
```

402
```
cat /root/.config/code-server/config.yaml
```

401
```
code-server

sudo systemctl enable --now code-server@$USER
```

400
```
# code-server 安装

curl -fsSL https://code-server.dev/install.sh | sh
```

399
```
zsh 不兼容 bash

read: -p: no process
```

398
```
echo "请输入："
read input
echo $input
```

397
```
. .venv/bin/activate
source .venv/bin/activate
```

396
```
echo alias python=python3 >> ~/.bashrc

echo alias cs=code-server >> ~/.bashrc
```

394
```
mysql

SELECT 0.1 + 0.2;
SHOW DATABASES;

exit;
```

391
```
powershell -ExecutionPolicy ByPass -File script.ps1
```

390
```
apt update
apt install mysql-server
systemctl status mysql
mysqladmin --version
```

389
```
git pull
git rebase origin/main
git push
```

388
```
You have divergent branches and to specify how to reconcile them.

Need to specify how to reconcile divergent branches.
```

387
```
# pwsh.sh
###################################
# Prerequisites

# Update the list of packages
sudo apt-get update

# Install pre-requisite packages.
sudo apt-get install -y wget apt-transport-https software-properties-common

# Get the version of Ubuntu
source /etc/os-release

# Download the Microsoft repository keys
wget -q https://packages.microsoft.com/config/ubuntu/$VERSION_ID/packages-microsoft-prod.deb

# Register the Microsoft repository keys
sudo dpkg -i packages-microsoft-prod.deb

# Delete the Microsoft repository keys file
rm packages-microsoft-prod.deb

# Update the list of packages after we added packages.microsoft.com
sudo apt-get update

###################################
# Install PowerShell
sudo apt-get install -y powershell

# Start PowerShell
pwsh
```

381
```
git init test
cd test
echo abc 123 > abc.txt
git add .
git commit -m 更新

git switch -c dev
echo cat > cat.txt
git add .
git commit -m 更新

git switch -
echo dog > dog.txt
git add .
git commit -m 更新
```

380
```
git rebase origin/dev
```

379
```
set fileformat=unix
set ff=unix
```

378
```
git reset HEAD^
git pull
```

377
```
python
a = set(['a', 'b', 'c'])
b = set(['b', 'c'])
a - b
len(a - b)
```

376
```
pwsh

$host.version
$PSVersionTable.PSVersion

pwd
echo abc123
0.1 + 0.2

cd /root
cd /workspace
cls

($var = 1 + 2) -eq 3
"Today is $(Get-Date)"
1..10
```

374
```
git show HEAD
git show HEAD^
```

372
```
edge://surf
```

371
```
apt update
apt install nginx
```

369
```
git reset --hard HEAD^

git push --force-with-lease
```

368
```
/var/www/html

/etc/nginx/sites-available/default
```

366
```
zsh --version
bash --version

python --version
git -v
node -v
docker -v
```

364
```
<meta charset = "utf-8">
<meta http-equiv = "content-language" content = "zh-CN">
```

342
```
echo -e 'Hello\nWorld'
```

336
```
#user  nobody;
worker_processes  1;

#error_log  logs/error.log;
#error_log  logs/error.log  notice;
#error_log  logs/error.log  info;

#pid        logs/nginx.pid;


events {
    worker_connections  1024;
}


http {
    include       mime.types;
    default_type  application/octet-stream;

    #log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
    #                  '$status $body_bytes_sent "$http_referer" '
    #                  '"$http_user_agent" "$http_x_forwarded_for"';

    #access_log  logs/access.log  main;

    sendfile        on;
    #tcp_nopush     on;

    #keepalive_timeout  0;
    keepalive_timeout  65;

    #gzip  on;

    server {
        listen       80;
        server_name  localhost;

        #charset koi8-r;

        #access_log  logs/host.access.log  main;

        location / {
            root   html;
            index  index.html index.htm;
        }

        #error_page  404              /404.html;

        # redirect server error pages to the static page /50x.html
        #
        error_page   500 502 503 504  /50x.html;
        location = /50x.html {
            root   html;
        }

        # proxy the PHP scripts to Apache listening on 127.0.0.1:80
        #
        #location ~ \.php$ {
        #    proxy_pass   http://127.0.0.1;
        #}

        # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000
        #
        #location ~ \.php$ {
        #    root           html;
        #    fastcgi_pass   127.0.0.1:9000;
        #    fastcgi_index  index.php;
        #    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;
        #    include        fastcgi_params;
        #}

        # deny access to .htaccess files, if Apache's document root
        # concurs with nginx's one
        #
        #location ~ /\.ht {
        #    deny  all;
        #}
    }


    # another virtual host using mix of IP-, name-, and port-based configuration
    #
    #server {
    #    listen       8000;
    #    listen       somename:8080;
    #    server_name  somename  alias  another.alias;

    #    location / {
    #        root   html;
    #        index  index.html index.htm;
    #    }
    #}


    # HTTPS server
    #
    #server {
    #    listen       443 ssl;
    #    server_name  localhost;

    #    ssl_certificate      cert.pem;
    #    ssl_certificate_key  cert.key;

    #    ssl_session_cache    shared:SSL:1m;
    #    ssl_session_timeout  5m;

    #    ssl_ciphers  HIGH:!aNULL:!MD5;
    #    ssl_prefer_server_ciphers  on;

    #    location / {
    #        root   html;
    #        index  index.html index.htm;
    #    }
    #}

}
```

326
```
阿里云 Instance RAM Role 没有授予给实例
```

308
```
# 默认配置

LOGIN_URL = 'admin/'
```

306
```
ssh-keygen -R 公网IP

ssh Administrator@公网IP
```

304
```
chcp

chcp 65001
```

292
```
cs -h
cs -g abc.md:10

cs /workspace
cs /etc/vim
```

280
```
ssh-keygen -R 公网IP

ssh-copy-id root@公网IP

ssh-copy-id -i /root/.ssh/id_rsa.pub root@公网IP
```

279
```
chmod 700 /root/.ssh/id_ed25519
```

276
```
function test() {
    return 'abc 123';
}

test()
```

274
```
git stash
git stash pop
```

272
```
echo "----gitee----"
```

268
```
echo echo abc 123 > a.ps1
```

265
```
cd Downloads
echo "echo abc123" > a.ps1
powershell -file a.ps1

powershell "echo abc123"
```

253
```
# Simple workflow for deploying static content to GitHub Pages
name: Deploy static content to Pages

on:
  # Runs on pushes targeting the default branch
  push:
    branches: ["main"]

  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:

# Sets permissions of the GITHUB_TOKEN to allow deployment to GitHub Pages
permissions:
  contents: read
  pages: write
  id-token: write

# Allow only one concurrent deployment, skipping runs queued between the run in-progress and latest queued.
# However, do NOT cancel in-progress runs as we want to allow these production deployments to complete.
concurrency:
  group: "pages"
  cancel-in-progress: false

jobs:
  # Single deploy job since we're just deploying
  deploy:
    environment:
      name: github-pages
      url: ${{ steps.deployment.outputs.page_url }}
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Setup Pages
        uses: actions/configure-pages@v4
      - name: Upload artifact
        uses: actions/upload-pages-artifact@v3
        with:
          # Upload entire repository
          path: '.'
      - name: Deploy to GitHub Pages
        id: deployment
        uses: actions/deploy-pages@v4
```

249
```
django Unordered Object List Warning
```

241
```
ipython

0.1 + 0.2
8 / 3, 10 / 4
4 == 5
'对' if 4 == 5 else '错'
exit()
```

237
```
:100
20dd

:50
p
```

236
```
mkdir test
cd test
git init

git init test

git switch -c dev
git branch dev

git branch

git add .
git commit -m update
```

233
```
/etc/vim/vimrc

set dir=/workspace/vim
set undodir=/workspace/vim
set backupdir=/workspace/vim

set number
```

232
```
" 备份新建文件夹
set dir=C:/Program\ Files\ (x86)/Vim/dir
set undodir=C:/Program\ Files\ (x86)/Vim/dir
set backupdir=C:/Program\ Files\ (x86)/Vim/dir
```

230
```
Debug.Print 1 + 2
Debug.Print 6 - 2
Debug.Print 2 * 3
Debug.Print 8 / 3
Debug.Print 2 = 3
Debug.Print "123" = 123
```

229
```
Function a()
    a = 123
End Function
```

225
```
bc
scale=2
1+1
8/3
quit
```

217
```
:wq
:q!
```

216
```
ls
echo abcd1234 > a.txt
ls
cat a.txt
vim a.txt
:wq
cat a.txt
rm a.txt
```

215
```
with open('abc.txt', 'w', encoding = 'utf-8') as f:
    f.write('abc123更新')
```

213
```
echo %cd%
echo %userprofile%
```

211
```
'abcd1234' | Out-File -FilePath 'a.txt' -Encoding 'utf8'
```

206
```
[Console]::OutputEncoding = [System.Text.Encoding]::UTF8
```

200
```
# Sample workflow for building and deploying a Jekyll site to GitHub Pages
name: Deploy Jekyll with GitHub Pages dependencies preinstalled

on:
  # Runs on pushes targeting the default branch
  push:
    branches: ["main"]

  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:

# Sets permissions of the GITHUB_TOKEN to allow deployment to GitHub Pages
permissions:
  contents: read
  pages: write
  id-token: write

# Allow only one concurrent deployment, skipping runs queued between the run in-progress and latest queued.
# However, do NOT cancel in-progress runs as we want to allow these production deployments to complete.
concurrency:
  group: "pages"
  cancel-in-progress: false

jobs:
  # Build job
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Setup Pages
        uses: actions/configure-pages@v4
      - name: Build with Jekyll
        uses: actions/jekyll-build-pages@v1
        with:
          source: ./
          destination: ./_site
      - name: Upload artifact
        uses: actions/upload-pages-artifact@v3

  # Deployment job
  deploy:
    environment:
      name: github-pages
      url: ${{ steps.deployment.outputs.page_url }}
    runs-on: ubuntu-latest
    needs: build
    steps:
      - name: Deploy to GitHub Pages
        id: deployment
        uses: actions/deploy-pages@v4
```

190
```
lsb_release -a
cat /etc/os-release
uname -a
```

188
```
ssh 用户名@公网IP
python

import os
os.environ['USERPROFILE']
os.path.expanduser('~')
```

182
```
bt default
bt 14
bt 5
```

181
```
root@公网IP
Administrator@公网IP
```

175
```
sqlite3
SELECT 0.1 + 0.2;
SELECT REPLACE('ABCD1234', 'AB', 'DE');
SELECT 'ABCD' || '1234';
```

174
```
sqlite3
.changes on
```

173
```
.headers on
.mode csv
.once data.csv
SELECT * FROM sqlite_master;
```

170
```
git config --global --list
```

166
```
275, 309 / 15 * 12, 490 / 2, 618 / 30 * 12, 735 / 3, 980 / 4, 1225 / 5
```

165
```
repr(123)
repr("abc")
```

160
```
python -m pip freeze > requirements.txt

python -m pip install -r requirements.txt
```

157
```
query user
logoff
```

156
```
git branch -vv
```

148
```
rm 微软.txt
```

145
```
ssh -V
```

132
```
sqlite3

.mode markdown
.open :memory:

CREATE TABLE COMPANY(
ID INT PRIMARY KEY NOT NULL,
NAME TEXT NOT NULL);

INSERT INTO COMPANY (ID, NAME) VALUES (1, 'Andy');
INSERT INTO COMPANY (ID, NAME) VALUES (2, 'Peter'), (3, 'Lucy');

SELECT * FROM COMPANY;
```

130
```
$Env:Path -split ';'
```

129
```
ssh 用户名@公网IP
PowerShell
Restart-Computer
```

124
```
ssh 用户名@公网IP
PowerShell
cd C:/inetpub/wwwroot
dir -Name
echo abcdef > c.html
```

119
```
def 替换一次(路径, 旧文, 新文):
    with open(路径, 'r', encoding = 'utf-8') as 文件:
        内容 = 文件.read()
    内容 = 内容.replace(旧文, 新文, 1)
    with open(路径, 'w', encoding = 'utf-8') as 文件:
        文件.write(内容)

替换一次('文件.txt', '旧文', '新文')
```

118
```
def 替换(路径, 旧文, 新文):
    with open(路径, 'r', encoding = 'utf-8') as 文件:
        内容 = 文件.read()
    内容 = 内容.replace(旧文, 新文)
    with open(路径, 'w', encoding = 'utf-8') as 文件:
        文件.write(内容)

替换('文件.txt', '旧文', '新文')
```

115
```
py

价格 = [5, 35, 65, 95, 125, 155 , 185, 215, 245, 275]
for 索引, 元素 in enumerate(价格):
    print(元素 / (索引 + 1))
```

114
```
cd Documents

New-Item -ItemType file -Name a.md
```

111
```
ssh 用户名@公网IP
PowerShell
cd C:/inetpub/wwwroot
New-Item -Name "a.html" -ItemType "file"
dir -Name
```

110
```
python

价格 = [5, 35, 65, 95, 125, 155 , 185, 215, 245, 275]
for i in range(len(价格)):
    print(价格[i] / (i + 1))
```

109
```
cd Downloads

Invoke-WebRequest -Uri "https://code.visualstudio.com/sha/download?build=stable&os=cli-win32-x64" -Outfile vs_cli.zip
```

106
```
Get-Alias -Definition Clear-Host
```

105
```
($var = 1 + 2) -eq 3
Invoke-Expression "1+1"
1..10
```

101
```
New-Item -Name "start.ps1" -ItemType "file"
```

99
```
0.1 + 0.2
```

98
```
新名[:10] + '…' if len(新名) > 10 else 新名
新名[:10] + '…' * (len(新名) > 10)
```

97
```
'…' * True
'…' * False
'a' * 7
('a' * 7)[:10]

('a' * 7)[:10] + '…' * (7 > 10)
('a' * 9)[:10] + '…' * (9 > 10)
('a' * 10)[:10] + '…' * (10 > 10)
('a' * 11)[:10] + '…' * (11 > 10)
```

96
```
New-Item -Name "hi.py" -ItemType "file"
```

95
```
[Math]::Pow(2, 3)
clear
8 % 3
python -V
git -v
```

86
```
mkdocs server -a 0.0.0.0:8080
```

85
```
ssh 用户名@公网IP

cd 项目\仓库
.venv\Scripts\activate
python manage.py shell

from 应用.models import 分类, 模型
分类.objects.all()
for i in 分类.objects.all():
    print(i)
exit()

exit
```

84
```
apt install sqlite3
sqlite3
.header on
.mode column
SELECT 2*3 AS 长;
.exit
```

82
```
bash
echo $BASH_VERSION
```

81
```
zsh --version
bash --version

python --version
git -v
docker -v
```

79
```
start powershell
```

77
```
echo $SHELL
cat /etc/shells
pwd
echo hello world
clear

zsh --version
bash --version
```

72
```
[int]( 5 / 2 )

[int]( 7 / 2 )
```

71
```
$PSVersionTable

Get-Member -InputObject $PSVersionTable
```

70
```
$a = Read-Host
$a
```

69
```
ssh 用户名@公网IP

powershell

Start-Process -FilePath PowerShell -ArgumentList "-File C:\Users\用户名\项目\仓库\启动.ps1"

Start-Process -FilePath PowerShell -ArgumentList "-File C:\Users\用户名\项目\仓库\start.ps1"
```

67
```
Stop-Process -Name powershell
Get-Process -Name PowerShell | Stop-Process -Force
```

66
```
ssh 用户名@公网IP
cd 项目\仓库
powershell
Start-Process -FilePath PowerShell -ArgumentList "-File .\启动.ps1"
```

64
```
ssh 用户名@公网IP

cd 项目\仓库
.venv\Scripts\activate
```

63
```
ssh 用户名@公网IP

cd 项目\仓库
.venv\Scripts\activate

git pull

py manage.py makemigrations 应用
py manage.py migrate

exit
```

62
```
powershell

$host.version
$PSVersionTable.PSVersion
```

61
```
node -v

node
1 + 1
Math.pow(2, 3)
.exit
```

60
```
lsb_release -a
```

59
```
ssh 用户名@公网IP

python
1 + 1
2 ** 3
sum([1, 2, 3, 4])
5 in range(5)
5 in range(10)
exit()

exit
```

58
```
style = "max-width: 100%;"
style = "word-wrap: break-word;"
```

56
```
free -m
uname -a
```

54
```
sudo apt update
sudo apt install onedrive

onedrive start
onedrive login
```

53
```
which mysqld
```

50
```
SHOW DATABASES;
USE mysql;
SHOW TABLES;
```

48
```
sudo apt-get update
sudo apt-get install mysql-server --no-install-recommends
```

46
```
git config --global core.quotepath false
```

45
```
cat /etc/issue
uname -a
python --version
git -v
```

44
```
touch hi.py
python hi.py
```

42
```
cd 项目\仓库
python -m venv .venv
.venv\Scripts\activate
pip install --upgrade pip
pip install Django
```

41
```
cd 项目\仓库

python -m venv .venv
.venv\Scripts\activate

pip install --upgrade pip
pip install Flask
```

40
```
pip install --upgrade pip
pip install jupyterlite
pip install jupyterlite-pyodide-kernel
```

39
```
pip install --upgrade pip
pip install jupyterlite-core
pip install jupyterlite-pyodide-kernel

jupyter lite init
jupyter lite build
jupyter lite serve
```

38
```
pip install --upgrade pip
pip install jupyterlite-core
pip install jupyterlite-pyodide-kernel
```

34
```
git switch -c develop
git push --set-upstream origin develop
```

33
```
pip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple

pip config set global.index-url https://mirrors.aliyun.com/pypi/simple
```

32
```
git diff dev master
git diff dev master --stat
```

31
```
python -m http.server 80
```

30
```
git push origin --delete abc
```

29
```
git push -u origin develop
```

28
```
git branch -d test
```

27
```
pip install --upgrade pip
```

26
```
git switch -c dev
```

23
```
def decimal_to_binary(decimal_number):
    binary_number = ''
    while decimal_number > 0:
        binary_number = str(decimal_number % 2) + binary_number
        decimal_number //= 2
    return binary_number
```

22
```
cd 项目\仓库
.venv\Scripts\activate

py manage.py shell
from django.core import serializers
from 应用.models import 模型

serializers.serialize("json", 模型.objects.all()[:10])
```

21
```
git config --global user.name "占位"
git config --global user.email "占位"
```

20
```
def get_success_url(self):
    id = self.object.id
    return reverse('应用:模型_detail', args = (id,))
```

19
```
git branch -a

git remote set-head origin -a
git branch -a
```

18
```
python

import datetime
datetime.datetime.today().strftime('%Y-%m')
```

17
```
javascript:document.body.contentEditable=true
```

16
```
python
列表 = ['Python', 'SQL', 'R语言']
列表.sort()
列表
```

15
```
python
列表 = ['VBA', 'SQL', 'R语言']
列表.sort()
列表
```

13
```
cd 项目\仓库
.venv\Scripts\activate

py manage.py shell

from 应用.models import 模型
模型.objects.all()
模型.objects.filter(id = 1)
模型.objects.get(id = 1)
模型.objects.get(id = 1).属性
模型.objects.get(pk = 1)

exit()
```

11
```
import re
match = re.search(r':(\d+)', 'abc:123def')
match
match.group(0)
match.group(1)
```

10
```
UPDATE 应用_模型 SET 分类 = '分类' WHERE url LIKE '%url%'
```

9
```
UPDATE 应用_模型 SET 分类 = '新分类' WHERE 名称 LIKE '%旧分类%'
```

8
```
UPDATE 应用_模型 SET 分类 = '分类' WHERE 名称 LIKE '名称%'
```

7
```
UPDATE 应用_模型 SET 分类 = '分类' WHERE 分类 = ''
```

6
```
UPDATE 应用_模型 SET 分类 = '分类' WHERE 名称 LIKE '%名称%' AND 分类 != '分类'
```

5
```
cd 项目\仓库
.venv\Scripts\activate

py manage.py startapp 应用

py manage.py makemigrations 应用
py manage.py migrate
```

4
```
cd 项目\仓库
.venv\Scripts\activate

py manage.py shell
from 应用.models import 模型
模型.objects.values_list('名称', flat = True).distinct()
```

3
```
UPDATE 应用_模型 SET 名称 = REPLACE(名称, '旧', '新') WHERE 名称 LIKE '%旧%'
```

2
```
WITH RECURSIVE 递归 AS (
    SELECT id, 父_id, 名称, 0 AS 等级, 名称 AS 合并
    FROM 树
    WHERE 父_id IS NULL
    UNION ALL
    SELECT t.id, t.父_id, t.名称, 递归.等级 +1, 递归.合并 || t.名称
    FROM 树 t
    JOIN 递归 ON t.父_id = 递归.id
)
SELECT * FROM 递归
```

1
```
CREATE TABLE 树 (
    id INTEGER PRIMARY KEY,
    父_id INTEGER,
    名称 TEXT
);
```
