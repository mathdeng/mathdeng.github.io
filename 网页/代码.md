# 代码

<div id = "首"></div>
<script src = "../js/首.js"></script>

总共 136 个片断。

439
```
# .vscode/preview.yml
autoOpen: false # 打开工作空间时是否自动开启所有应用的预览
apps:
  - port: 8000 # 应用的端口
    run: python manage.py runserver # 应用的启动命令
    root: ./site # 应用的启动目录
    name: my-first-app # 应用名称
    description: 我的第一个 App。 # 应用描述
    autoOpen: true # 打开工作空间时是否自动开启预览（优先级高于根级 autoOpen）
```

438
```
tar -cf archive.tar file1 file2 dir1


tar -xf archive.tar
```

436
```
pip install --upgrade pip

pip install Django==5.0
cd /workspace
django-admin startproject mysite
cd mysite
python manage.py runserver
python manage.py migrate
python manage.py createsuperuser
```

435
```
## 欢迎来到 Cloud Studio ##

这是一个展现 Cloud Studio 功能的 Python 示例。

##  自动预览 ##

之所以自动运行了这个应用并打开了预览窗口，是因为有 `.vscode/preview.yml` 文件存在。

该文件的格式说明如下：

```yml
# .vscode/preview.yml
autoOpen: false
apps:
  - port: 5000
    run: 'pip install -i https://mirrors.tencent.com/pypi/simple/ -r ./requirements.txt && python ./app.py'
    root: ./web
    name: Python Cloud Studio Demo
    description: Python Cloud Studio Demo Project
    autoOpen: true

```

### 生成预览配置文件 ###
如果你想生成该文件，可以按下 <kbd>CMD+Shift+P</kbd>，打开命令面板，输入 `preview`，在命令列表中点击 **Preview: Generate Preview Config File**。

### 启动预览窗口 ###
有了这个文件后，你可以自己启动预览窗口。按下 <kbd>CMD+Shift+P</kbd>，打开命令面板，输入 `preview`，在命令列表中点击 **Preview: Open Preview Tab**。

##  手动开启预览调试 ##

1. 先进入到 `web` 目录，然后在终端直接运行 `pip install -i https://mirrors.tencent.com/pypi/simple/ -r ./requirements.txt && python ./app.py` 启动服务。

2. 完全启动之后，打开命令面板(`Command + Shift + P` 或 `Ctrl + Shift + P`) 并输入 `open preview tab`, 回车。

![](./static/img2.png)

3. 输入端口号 `5000`，回车后将自动打开预览窗口。
```

434
```
New-SmbGlobalMapping -LocalPath z: -RemotePath \\阿里云NAS\myshare -Persistent $true
```

432
```
#!/bin/bash
set -e
# start Xvfb xserver
Xvfb :0 -screen 0 960x540x24 -listen tcp -ac +extension GLX +extension RENDER > /dev/null 2>&1 &
# start x11vnc server
x11vnc -forever -shared -noipv6 > /dev/null 2>&1 &
# start noven server
websockify --web /usr/share/novnc 6080 localhost:5900 > /dev/null 2>&1 &
# install pygame
pip3 install pygame
```

431
```
# .vscode/preview.yml
autoOpen: true # 打开工作空间时是否自动开启所有应用的预览
apps:
  - port: 5000 # 应用的端口
    run: pip install -i https://mirrors.tencent.com/pypi/simple/ -r ./requirements.txt && bash /usr/bin/start-vnc-session.sh && python ./app.py # 应用启动命令
    root: ./web # 应用的启动目录
    name: Python Cloud Studio Demo # 应用名称
    description: Python Cloud Studio Demo Project # 应用描述
    autoOpen: true # 打开工作空间时是否自动运行命令（优先级高于根级 autoOpen）
    autoPreview: true # 是否自动打开预览, 若无则默认为true
```

430
```
# 阿里云 NAS

控制面板
网络和共享中心
更改适配器设置
右键 - 属性
Internet 协议版本 4(TCP/IPv4) - 属性
高级 - WINS
NetBIOS 设置 - 启用
```

428
```
CSRF_TRUSTED_ORIGINS = [
    'http://localhost:8000'
],
ALLOWED_HOSTS = [
    'localhost',
],
CORS_ORIGIN_WHITELIST = [
    'http://localhost:8000',
]
```

425
```
cs /etc/vim/vimrc

set dir=/workspace/vim
set undodir=/workspace/vim
set backupdir=/workspace/vim

set number
set fileformat=unix
```

423
```
screen --version
```

418
```
# Django 日志级别、日期时间、模块、进程、线程、信息。

    'formatters': {
        'verbose': {
            'format': '{levelname} {asctime} {module} {process:d} {thread:d} {message}',
            'style': '{',
        },
    },
```

417
```
curl -Lk 'https://code.visualstudio.com/sha/download?build=stable&os=cli-alpine-x64' --output vscode_cli.tar.gz

tar -xf vscode_cli.tar.gz

code tunnel
```

416
```
curl -Lk 'https://code.visualstudio.com/sha/download?build=stable&os=cli-alpine-x64' --output vscode_cli.tar.gz

tar -xf vscode_cli.tar.gz

code tunnel
```

415
```
snap install code --classic

code tunnel

github.com/login/device
```

414
```
LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'handlers': {
        'file': {
            'level': 'INFO',
            'class': 'logging.FileHandler',
            'filename': '/path/to/django.log',
        },
    },
    'loggers': {
        'django': {
            'handlers': ['file'],
            'level': 'INFO',
            'propagate': True,
        },
    },
}
```

413
```
LOGGING = {
    "version": 1,
    "disable_existing_loggers": False,
    "handlers": {
        "file": {
            "level": "DEBUG",
            "class": "logging.FileHandler",
            "filename": "/path/to/django/debug.log",
        },
    },
    "loggers": {
        "django": {
            "handlers": ["file"],
            "level": "DEBUG",
            "propagate": True,
        },
    },
}
```

411
```
reboot
```

410
```
chsh -s /bin/bash
```

407
```
Unit code-server.service
```

405
```
curl Error in the HTTP2 framing layer
```

402
```
cat /root/.config/code-server/config.yaml
```

401
```
code-server

sudo systemctl enable --now code-server@$USER
```

400
```
# code-server 安装

curl -fsSL https://code-server.dev/install.sh | sh
```

399
```
zsh 不兼容 bash

read: -p: no process
```

398
```
echo "请输入："
read input
echo $input
```

397
```
. .venv/bin/activate
source .venv/bin/activate
```

396
```
echo alias python=python3 >> ~/.bashrc
```

395
```
python -V
pip --version

pip install Django
django-admin startproject mysite
python manage.py runserver
```

394
```
mysql

SELECT 0.1 + 0.2;
SHOW DATABASES;

exit;
```

391
```
powershell -ExecutionPolicy ByPass -File script.ps1
```

390
```
apt update
apt install mysql-server
systemctl status mysql
mysqladmin --version
```

389
```
git pull
git rebase origin/main
git push
```

388
```
You have divergent branches and to specify how to reconcile them.

Need to specify how to reconcile divergent branches.
```

387
```
# pwsh.sh
###################################
# Prerequisites

# Update the list of packages
sudo apt-get update

# Install pre-requisite packages.
sudo apt-get install -y wget apt-transport-https software-properties-common

# Get the version of Ubuntu
source /etc/os-release

# Download the Microsoft repository keys
wget -q https://packages.microsoft.com/config/ubuntu/$VERSION_ID/packages-microsoft-prod.deb

# Register the Microsoft repository keys
sudo dpkg -i packages-microsoft-prod.deb

# Delete the Microsoft repository keys file
rm packages-microsoft-prod.deb

# Update the list of packages after we added packages.microsoft.com
sudo apt-get update

###################################
# Install PowerShell
sudo apt-get install -y powershell

# Start PowerShell
pwsh
```

381
```
git init test
cd test
echo abc 123 > abc.txt
git add .
git commit -m 更新

git switch -c dev
echo cat > cat.txt
git add .
git commit -m 更新

git switch -
echo dog > dog.txt
git add .
git commit -m 更新
```

380
```
git rebase origin/dev
```

379
```
set fileformat=unix
set ff=unix
```

378
```
git reset HEAD^
git pull
```

377
```
python
a = set(['a', 'b', 'c'])
b = set(['b', 'c'])
a - b
len(a - b)
```

376
```
pwsh

$host.version
$PSVersionTable.PSVersion

pwd
echo abc123
0.1 + 0.2

cd /root
cd /workspace
cls

($var = 1 + 2) -eq 3
"Today is $(Get-Date)"
1..10
```

374
```
git show HEAD
git show HEAD^
```

372
```
edge://surf
```

371
```
apt update
apt install nginx
```

369
```
git reset --hard HEAD^

git push --force-with-lease
```

368
```
/var/www/html

/etc/nginx/sites-available/default
```

366
```
zsh --version
bash --version

python --version
git -v
node -v
docker -v
```

364
```
<meta charset = "utf-8">
<meta http-equiv = "content-language" content = "zh-CN">
```

342
```
echo -e 'Hello\nWorld'
```

336
```
#user  nobody;
worker_processes  1;

#error_log  logs/error.log;
#error_log  logs/error.log  notice;
#error_log  logs/error.log  info;

#pid        logs/nginx.pid;


events {
    worker_connections  1024;
}


http {
    include       mime.types;
    default_type  application/octet-stream;

    #log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
    #                  '$status $body_bytes_sent "$http_referer" '
    #                  '"$http_user_agent" "$http_x_forwarded_for"';

    #access_log  logs/access.log  main;

    sendfile        on;
    #tcp_nopush     on;

    #keepalive_timeout  0;
    keepalive_timeout  65;

    #gzip  on;

    server {
        listen       80;
        server_name  localhost;

        #charset koi8-r;

        #access_log  logs/host.access.log  main;

        location / {
            root   html;
            index  index.html index.htm;
        }

        #error_page  404              /404.html;

        # redirect server error pages to the static page /50x.html
        #
        error_page   500 502 503 504  /50x.html;
        location = /50x.html {
            root   html;
        }

        # proxy the PHP scripts to Apache listening on 127.0.0.1:80
        #
        #location ~ \.php$ {
        #    proxy_pass   http://127.0.0.1;
        #}

        # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000
        #
        #location ~ \.php$ {
        #    root           html;
        #    fastcgi_pass   127.0.0.1:9000;
        #    fastcgi_index  index.php;
        #    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;
        #    include        fastcgi_params;
        #}

        # deny access to .htaccess files, if Apache's document root
        # concurs with nginx's one
        #
        #location ~ /\.ht {
        #    deny  all;
        #}
    }


    # another virtual host using mix of IP-, name-, and port-based configuration
    #
    #server {
    #    listen       8000;
    #    listen       somename:8080;
    #    server_name  somename  alias  another.alias;

    #    location / {
    #        root   html;
    #        index  index.html index.htm;
    #    }
    #}


    # HTTPS server
    #
    #server {
    #    listen       443 ssl;
    #    server_name  localhost;

    #    ssl_certificate      cert.pem;
    #    ssl_certificate_key  cert.key;

    #    ssl_session_cache    shared:SSL:1m;
    #    ssl_session_timeout  5m;

    #    ssl_ciphers  HIGH:!aNULL:!MD5;
    #    ssl_prefer_server_ciphers  on;

    #    location / {
    #        root   html;
    #        index  index.html index.htm;
    #    }
    #}

}
```

304
```
chcp

chcp 65001
```

292
```
cs -h
cs -g abc.md:10

cs /workspace
cs /etc/vim
```

279
```
chmod 700 /root/.ssh/id_ed25519
```

276
```
function test() {
    return 'abc 123';
}

test()
```

274
```
git stash
git stash pop
```

272
```
echo "----gitee----"
```

268
```
echo echo abc 123 > a.ps1
```

265
```
cd Downloads
echo "echo abc123" > a.ps1
powershell -file a.ps1

powershell "echo abc123"
```

253
```
# Simple workflow for deploying static content to GitHub Pages
name: Deploy static content to Pages

on:
  # Runs on pushes targeting the default branch
  push:
    branches: ["main"]

  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:

# Sets permissions of the GITHUB_TOKEN to allow deployment to GitHub Pages
permissions:
  contents: read
  pages: write
  id-token: write

# Allow only one concurrent deployment, skipping runs queued between the run in-progress and latest queued.
# However, do NOT cancel in-progress runs as we want to allow these production deployments to complete.
concurrency:
  group: "pages"
  cancel-in-progress: false

jobs:
  # Single deploy job since we're just deploying
  deploy:
    environment:
      name: github-pages
      url: ${{ steps.deployment.outputs.page_url }}
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Setup Pages
        uses: actions/configure-pages@v4
      - name: Upload artifact
        uses: actions/upload-pages-artifact@v3
        with:
          # Upload entire repository
          path: '.'
      - name: Deploy to GitHub Pages
        id: deployment
        uses: actions/deploy-pages@v4
```

241
```
ipython

0.1 + 0.2
8 / 3, 10 / 4
4 == 5
'对' if 4 == 5 else '错'
exit()
```

237
```
:100
20dd

:50
p
```

236
```
mkdir test
cd test
git init

git init test

git switch -c dev
git branch dev

git branch

git add .
git commit -m update
```

233
```
/etc/vim/vimrc

set dir=/workspace/vim
set undodir=/workspace/vim
set backupdir=/workspace/vim

set number
```

232
```
" 备份新建文件夹
set dir=C:/Program\ Files\ (x86)/Vim/dir
set undodir=C:/Program\ Files\ (x86)/Vim/dir
set backupdir=C:/Program\ Files\ (x86)/Vim/dir
```

230
```
Debug.Print 1 + 2
Debug.Print 6 - 2
Debug.Print 2 * 3
Debug.Print 8 / 3
Debug.Print 2 = 3
Debug.Print "123" = 123
```

229
```
Function a()
    a = 123
End Function
```

225
```
bc
scale=2
1+1
8/3
quit
```

217
```
:wq
:q!
```

216
```
ls
echo abcd1234 > a.txt
ls
cat a.txt
vim a.txt
:wq
cat a.txt
rm a.txt
```

215
```
with open('abc.txt', 'w', encoding = 'utf-8') as f:
    f.write('abc123更新')
```

213
```
echo %cd%
echo %userprofile%
```

206
```
[Console]::OutputEncoding = [System.Text.Encoding]::UTF8
```

200
```
# Sample workflow for building and deploying a Jekyll site to GitHub Pages
name: Deploy Jekyll with GitHub Pages dependencies preinstalled

on:
  # Runs on pushes targeting the default branch
  push:
    branches: ["main"]

  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:

# Sets permissions of the GITHUB_TOKEN to allow deployment to GitHub Pages
permissions:
  contents: read
  pages: write
  id-token: write

# Allow only one concurrent deployment, skipping runs queued between the run in-progress and latest queued.
# However, do NOT cancel in-progress runs as we want to allow these production deployments to complete.
concurrency:
  group: "pages"
  cancel-in-progress: false

jobs:
  # Build job
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Setup Pages
        uses: actions/configure-pages@v4
      - name: Build with Jekyll
        uses: actions/jekyll-build-pages@v1
        with:
          source: ./
          destination: ./_site
      - name: Upload artifact
        uses: actions/upload-pages-artifact@v3

  # Deployment job
  deploy:
    environment:
      name: github-pages
      url: ${{ steps.deployment.outputs.page_url }}
    runs-on: ubuntu-latest
    needs: build
    steps:
      - name: Deploy to GitHub Pages
        id: deployment
        uses: actions/deploy-pages@v4
```

190
```
lsb_release -a
cat /etc/os-release
uname -a
```

182
```
bt default
bt 14
bt 5
```

175
```
sqlite3
SELECT 0.1 + 0.2;
SELECT REPLACE('ABCD1234', 'AB', 'DE');
SELECT 'ABCD' || '1234';
```

174
```
sqlite3
.changes on
```

173
```
.headers on
.mode csv
.once data.csv
SELECT * FROM sqlite_master;
```

170
```
git config --global --list
```

166
```
275, 309 / 15 * 12, 490 / 2, 618 / 30 * 12, 735 / 3, 980 / 4, 1225 / 5
```

165
```
repr(123)
repr("abc")
```

160
```
python -m pip freeze > requirements.txt

python -m pip install -r requirements.txt
```

157
```
query user
logoff
```

156
```
git branch -vv
```

148
```
rm 微软.txt
```

145
```
ssh -V
```

132
```
sqlite3

.mode markdown
.open :memory:

CREATE TABLE COMPANY(
ID INT PRIMARY KEY NOT NULL,
NAME TEXT NOT NULL);

INSERT INTO COMPANY (ID, NAME) VALUES (1, 'Andy');
INSERT INTO COMPANY (ID, NAME) VALUES (2, 'Peter'), (3, 'Lucy');

SELECT * FROM COMPANY;
```

130
```
$Env:Path -split ';'
```

119
```
def 替换一次(路径, 旧文, 新文):
    with open(路径, 'r', encoding = 'utf-8') as 文件:
        内容 = 文件.read()
    内容 = 内容.replace(旧文, 新文, 1)
    with open(路径, 'w', encoding = 'utf-8') as 文件:
        文件.write(内容)

替换一次('文件.txt', '旧文', '新文')
```

118
```
def 替换(路径, 旧文, 新文):
    with open(路径, 'r', encoding = 'utf-8') as 文件:
        内容 = 文件.read()
    内容 = 内容.replace(旧文, 新文)
    with open(路径, 'w', encoding = 'utf-8') as 文件:
        文件.write(内容)

替换('文件.txt', '旧文', '新文')
```

115
```
py

价格 = [5, 35, 65, 95, 125, 155 , 185, 215, 245, 275]
for 索引, 元素 in enumerate(价格):
    print(元素 / (索引 + 1))
```

114
```
cd Documents

New-Item -ItemType file -Name a.md
```

110
```
python

价格 = [5, 35, 65, 95, 125, 155 , 185, 215, 245, 275]
for i in range(len(价格)):
    print(价格[i] / (i + 1))
```

109
```
cd Downloads

Invoke-WebRequest -Uri "https://code.visualstudio.com/sha/download?build=stable&os=cli-win32-x64" -Outfile vs_cli.zip
```

106
```
Get-Alias -Definition Clear-Host
```

105
```
($var = 1 + 2) -eq 3
Invoke-Expression "1+1"
1..10
```

99
```
0.1 + 0.2
```

97
```
'…' * True
'…' * False
'a' * 7
('a' * 7)[:10]

('a' * 7)[:10] + '…' * (7 > 10)
('a' * 9)[:10] + '…' * (9 > 10)
('a' * 10)[:10] + '…' * (10 > 10)
('a' * 11)[:10] + '…' * (11 > 10)
```

96
```
New-Item -Name "hi.py" -ItemType "file"
```

95
```
[Math]::Pow(2, 3)
clear
8 % 3
python -V
git -v
```

86
```
mkdocs server -a 0.0.0.0:8080
```

84
```
apt install sqlite3
sqlite3
.header on
.mode column
SELECT 2*3 AS 长;
.exit
```

82
```
bash
echo $BASH_VERSION
```

81
```
zsh --version
bash --version

python --version
git -v
docker -v
```

79
```
start powershell
```

77
```
echo $SHELL
cat /etc/shells
pwd
echo hello world
clear

zsh --version
bash --version
```

72
```
[int]( 5 / 2 )

[int]( 7 / 2 )
```

71
```
$PSVersionTable

Get-Member -InputObject $PSVersionTable
```

70
```
$a = Read-Host
$a
```

62
```
powershell

$host.version
$PSVersionTable.PSVersion
```

61
```
node -v

node
1 + 1
Math.pow(2, 3)
.exit
```

60
```
lsb_release -a
```

53
```
which mysqld
```

50
```
SHOW DATABASES;
USE mysql;
SHOW TABLES;
```

46
```
git config --global core.quotepath false
```

45
```
cat /etc/issue
uname -a
python --version
git -v
```

40
```
pip install --upgrade pip
pip install jupyterlite
pip install jupyterlite-pyodide-kernel
```

39
```
pip install --upgrade pip
pip install jupyterlite-core
pip install jupyterlite-pyodide-kernel

jupyter lite init
jupyter lite build
jupyter lite serve
```

38
```
pip install --upgrade pip
pip install jupyterlite-core
pip install jupyterlite-pyodide-kernel
```

34
```
git switch -c develop
git push --set-upstream origin develop
```

33
```
pip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple
```

31
```
python -m http.server 80
```

30
```
git push origin --delete abc
```

29
```
git push -u origin develop
```

28
```
git branch -d test
```

27
```
pip install --upgrade pip
```

26
```
git switch -c dev
```

23
```
def decimal_to_binary(decimal_number):
    binary_number = ''
    while decimal_number > 0:
        binary_number = str(decimal_number % 2) + binary_number
        decimal_number //= 2
    return binary_number
```

19
```
git branch -a

git remote set-head origin -a
git branch -a
```

18
```
python

import datetime
datetime.datetime.today().strftime('%Y-%m')
```

17
```
javascript:document.body.contentEditable=true
```

16
```
python
列表 = ['Python', 'SQL', 'R语言']
列表.sort()
列表
```

15
```
python
列表 = ['VBA', 'SQL', 'R语言']
列表.sort()
列表
```

11
```
import re
match = re.search(r':(\d+)', 'abc:123def')
match
match.group(0)
match.group(1)
```

2
```
WITH RECURSIVE 递归 AS (
    SELECT id, 父_id, 名称, 0 AS 等级, 名称 AS 合并
    FROM 树
    WHERE 父_id IS NULL
    UNION ALL
    SELECT t.id, t.父_id, t.名称, 递归.等级 +1, 递归.合并 || t.名称
    FROM 树 t
    JOIN 递归 ON t.父_id = 递归.id
)
SELECT * FROM 递归
```

1
```
CREATE TABLE 树 (
    id INTEGER PRIMARY KEY,
    父_id INTEGER,
    名称 TEXT
);
```
